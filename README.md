# 3-D localization based on Magnetic field

This is my Master thesis, supervised by **Sizhen Bian**, at the group **Embedded Intelligence** of DFKI.

## Sensors & Device 

* IMU
* Transmitter
* Ultra Sound 


## Data
We collected data both indoor and outdoor. The indoor data is at the second floor in DFKI Kaiserslautern, and collected outdoor data at the 

## Approach
### Preprocessing

* **Filtering out** the noise, picking up the peak mag point generated by each transmitter.
* **Interpolating** the ultrasound data, since these two sensors have different frequence, the data will be more smooth after interpolation.



### Dead Reckoning
Dead Reckoning is a method to calculate the current position based on previously determined position. In our cases, given the **previous position** and **velocity**, we can take advantage the data from IMU, from which we can get **acceleration and eular angles** of each axis.

### Model 
* Physical model


![](./figure/1_reg.png)
![](./figure/2_reg.png)
![](./figure/3_reg.png)

* Machine Learning model
   
  
### Kalman Filter 
###  Data fusion
![](./figure/1.jpeg)

## Code

| file | description |
| ---- | -------- |
| [phy_model.py](./phy_model.py) | a physical model, predicting the position based distances to 3 transmitters |
| [ml_model.py](./ml_model.py)| using machine learning methods to predict the position|
| [dead_reckoning.py](dead_reckoning.py) |Integrating the IMU data by using Dead reckoning algorithem|   
| Kalman_filter.py| |
| performance.py | |
| [model](./model)| regression model and several ml models|

## Experiment Result
 
## Reference

* Integrated WiFi/PDR/Smartphone Using an Unscented Kalman Filter Algorithm for 3D Indoor Localization
* A Robust Indoor Positioning System based on Encoded Magnetic Field and Low-cost IMU
